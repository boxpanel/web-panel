# 低配服务器优化配置
# Low-spec Server Optimization Configuration

# 服务器基础配置
PORT=3001
NODE_ENV=production

# 内存优化设置
# 限制Node.js最大内存使用 (256MB)
NODE_OPTIONS=--max-old-space-size=256

# 数据库配置 (使用SQLite减少内存占用)
DB_TYPE=sqlite
DB_PATH=./data/webpanel.db

# 缓存配置 (减少缓存大小)
CACHE_SIZE=50
CACHE_TTL=300

# 进程管理配置
# 单进程模式，避免多进程占用过多资源
CLUSTER_MODE=false
WORKER_PROCESSES=1

# 文件上传限制 (减少内存使用)
MAX_FILE_SIZE=10MB
MAX_FILES_COUNT=5

# 日志配置 (减少磁盘I/O)
LOG_LEVEL=warn
LOG_MAX_FILES=3
LOG_MAX_SIZE=5MB

# 会话配置
SESSION_SECRET=your-secret-key-change-this
SESSION_MAX_AGE=3600000

# 安全配置
JWT_SECRET=your-jwt-secret-change-this
JWT_EXPIRES_IN=1h

# 系统监控配置
# 降低监控频率以减少CPU使用
MONITOR_INTERVAL=30000
STATS_RETENTION_DAYS=7

# 静态文件服务
# 禁用某些不必要的中间件
ENABLE_COMPRESSION=true
ENABLE_STATIC_CACHE=true
STATIC_CACHE_MAX_AGE=86400

# 数据库连接池 (SQLite不需要连接池，但保留配置)
DB_POOL_MIN=1
DB_POOL_MAX=2

# API限流配置 (保护低配服务器)
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX_REQUESTS=100

# 垃圾回收优化
# 更频繁的垃圾回收以释放内存
GC_INTERVAL=60000

# 禁用某些功能以节省资源
ENABLE_REAL_TIME_MONITORING=false
ENABLE_DETAILED_LOGGING=false
ENABLE_PERFORMANCE_METRICS=false

# 客户端构建优化
REACT_APP_API_URL=http://localhost:3001
REACT_APP_ENABLE_DEVTOOLS=false
GENERATE_SOURCEMAP=false

# 低配服务器标识
SERVER_PROFILE=lowspec
OPTIMIZATION_MODE=memory